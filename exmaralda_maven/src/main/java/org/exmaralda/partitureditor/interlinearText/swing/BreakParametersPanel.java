/*
 * JPanel.java
 *
 * Created on 27. Maerz 2002, 10:14
 */

package org.exmaralda.partitureditor.interlinearText.swing;

import javax.swing.JOptionPane;
import org.exmaralda.partitureditor.interlinearText.*;
/**
 *
 * @author  Thomas
 */
public class BreakParametersPanel extends javax.swing.JPanel {

    char[] wordEndChars;
    
    /** Creates new form JPanel */
    public BreakParametersPanel() {
        initComponents();
    }

    /** Creates new form JPanel */
    public BreakParametersPanel(BreakParameters param) {
        initComponents();
        boolean bv = param.respectWordBoundaries[0] || param.respectWordBoundaries[1] || param.respectWordBoundaries[2] || param.respectWordBoundaries[3];
        respectWordBoundariesCheckBox.setSelected(bv);
        wordEndChars = param.wordEndChars;
        updateWordBoundarieLabel();
        toleranceSlider.setValue(param.tolerance);
        vertToleranceSlider.setValue(param.pageBreakTolerance);
        labelSpaceSlider.setValue(param.additionalLabelSpace);
        removeEmptyLinesCheckBox.setSelected(param.removeEmptyLines);
        numberItBundlesCheckBox.setSelected(param.numberItBundles);
        smoothRightBoundariesCheckBox.setSelected(param.smoothRightBoundary);
        saveSpaceCheckBox.setSelected(param.saveSpace);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        respectWordBoundariesCheckBox = new javax.swing.JCheckBox();
        jPanel6 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        wordBoundariesLabel = new javax.swing.JLabel();
        changeWordBoundariesButton = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        toleranceSlider = new javax.swing.JSlider();
        jPanel4 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        vertToleranceSlider = new javax.swing.JSlider();
        jPanel8 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        labelSpaceSlider = new javax.swing.JSlider();
        jPanel3 = new javax.swing.JPanel();
        removeEmptyLinesCheckBox = new javax.swing.JCheckBox();
        numberItBundlesCheckBox = new javax.swing.JCheckBox();
        smoothRightBoundariesCheckBox = new javax.swing.JCheckBox();
        saveSpaceCheckBox = new javax.swing.JCheckBox();

        setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.Y_AXIS));

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Word boundaries"));
        jPanel1.setLayout(new java.awt.GridLayout(2, 1));

        jPanel5.setLayout(new javax.swing.BoxLayout(jPanel5, javax.swing.BoxLayout.LINE_AXIS));

        respectWordBoundariesCheckBox.setSelected(true);
        respectWordBoundariesCheckBox.setText("Respect word boundaries");
        respectWordBoundariesCheckBox.setToolTipText("Wortgrenzen beim Umbruch beachten");
        jPanel5.add(respectWordBoundariesCheckBox);

        jPanel1.add(jPanel5);

        jPanel6.setLayout(new javax.swing.BoxLayout(jPanel6, javax.swing.BoxLayout.LINE_AXIS));

        jLabel2.setText("Word boundaries: ");
        jLabel2.setMaximumSize(new java.awt.Dimension(130, 16));
        jLabel2.setMinimumSize(new java.awt.Dimension(130, 16));
        jLabel2.setPreferredSize(new java.awt.Dimension(130, 16));
        jPanel6.add(jLabel2);

        wordBoundariesLabel.setText("[ ] ['] [-]");
        wordBoundariesLabel.setMaximumSize(new java.awt.Dimension(130, 16));
        wordBoundariesLabel.setMinimumSize(new java.awt.Dimension(130, 16));
        wordBoundariesLabel.setPreferredSize(new java.awt.Dimension(130, 16));
        jPanel6.add(wordBoundariesLabel);

        changeWordBoundariesButton.setText("Change...");
        changeWordBoundariesButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                changeWordBoundariesButtonActionPerformed(evt);
            }
        });
        jPanel6.add(changeWordBoundariesButton);

        jPanel1.add(jPanel6);

        add(jPanel1);

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("Measures"));
        jPanel2.setLayout(new java.awt.GridLayout(3, 1));

        jPanel7.setLayout(new javax.swing.BoxLayout(jPanel7, javax.swing.BoxLayout.LINE_AXIS));

        jLabel5.setText("Horizontal tolerance: ");
        jLabel5.setToolTipText("Grenzwert für Partitur-Umbruch");
        jLabel5.setMaximumSize(new java.awt.Dimension(150, 16));
        jLabel5.setMinimumSize(new java.awt.Dimension(130, 16));
        jLabel5.setPreferredSize(new java.awt.Dimension(130, 16));
        jPanel7.add(jLabel5);

        toleranceSlider.setMajorTickSpacing(50);
        toleranceSlider.setMaximum(200);
        toleranceSlider.setMinorTickSpacing(10);
        toleranceSlider.setPaintLabels(true);
        toleranceSlider.setPaintTicks(true);
        toleranceSlider.setValue(30);
        jPanel7.add(toleranceSlider);

        jPanel2.add(jPanel7);

        jPanel4.setLayout(new javax.swing.BoxLayout(jPanel4, javax.swing.BoxLayout.LINE_AXIS));

        jLabel1.setText("Vertical tolerance: ");
        jLabel1.setToolTipText("Grenzwert für Seitenumbruch");
        jLabel1.setMaximumSize(new java.awt.Dimension(150, 16));
        jLabel1.setMinimumSize(new java.awt.Dimension(130, 16));
        jLabel1.setPreferredSize(new java.awt.Dimension(130, 16));
        jPanel4.add(jLabel1);

        vertToleranceSlider.setMajorTickSpacing(50);
        vertToleranceSlider.setMinorTickSpacing(10);
        vertToleranceSlider.setPaintLabels(true);
        vertToleranceSlider.setPaintTicks(true);
        vertToleranceSlider.setValue(20);
        jPanel4.add(vertToleranceSlider);

        jPanel2.add(jPanel4);

        jPanel8.setLayout(new javax.swing.BoxLayout(jPanel8, javax.swing.BoxLayout.LINE_AXIS));

        jLabel6.setText("Additional label space: ");
        jLabel6.setToolTipText("Zusätzlicher Freiraum nach Sprecherlabels");
        jLabel6.setMaximumSize(new java.awt.Dimension(150, 16));
        jPanel8.add(jLabel6);

        labelSpaceSlider.setMajorTickSpacing(10);
        labelSpaceSlider.setMaximum(30);
        labelSpaceSlider.setMinorTickSpacing(5);
        labelSpaceSlider.setPaintLabels(true);
        labelSpaceSlider.setPaintTicks(true);
        labelSpaceSlider.setValue(5);
        jPanel8.add(labelSpaceSlider);

        jPanel2.add(jPanel8);

        add(jPanel2);

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder("Miscellaneous"));
        jPanel3.setLayout(new java.awt.GridLayout(4, 1));

        removeEmptyLinesCheckBox.setSelected(true);
        removeEmptyLinesCheckBox.setText("Remove empty lines");
        removeEmptyLinesCheckBox.setToolTipText("Leere Zeilen nach Umbruch entfernen");
        jPanel3.add(removeEmptyLinesCheckBox);

        numberItBundlesCheckBox.setSelected(true);
        numberItBundlesCheckBox.setText("Number partitur areas");
        numberItBundlesCheckBox.setToolTipText("Partiturflächen nummerieren");
        jPanel3.add(numberItBundlesCheckBox);

        smoothRightBoundariesCheckBox.setSelected(true);
        smoothRightBoundariesCheckBox.setText("Smooth right boundaries");
        smoothRightBoundariesCheckBox.setToolTipText("Rechte Ränder angleichen");
        jPanel3.add(smoothRightBoundariesCheckBox);

        saveSpaceCheckBox.setText("Save space");
        jPanel3.add(saveSpaceCheckBox);

        add(jPanel3);
    }// </editor-fold>//GEN-END:initComponents

    private void changeWordBoundariesButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_changeWordBoundariesButtonActionPerformed
       String wec = "";
       for (char c : wordEndChars){
           wec+=c;
       }
       String message = "Please enter word boundary characters:";
       String returnValue = JOptionPane.showInputDialog(jPanel1, message , wec);
       wordEndChars = new char[returnValue.length()];
       for (int pos=0; pos<returnValue.length(); pos++){
           wordEndChars[pos]=returnValue.charAt(pos);
       }       
       updateWordBoundarieLabel();
    }//GEN-LAST:event_changeWordBoundariesButtonActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton changeWordBoundariesButton;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JSlider labelSpaceSlider;
    private javax.swing.JCheckBox numberItBundlesCheckBox;
    private javax.swing.JCheckBox removeEmptyLinesCheckBox;
    private javax.swing.JCheckBox respectWordBoundariesCheckBox;
    private javax.swing.JCheckBox saveSpaceCheckBox;
    private javax.swing.JCheckBox smoothRightBoundariesCheckBox;
    private javax.swing.JSlider toleranceSlider;
    private javax.swing.JSlider vertToleranceSlider;
    private javax.swing.JLabel wordBoundariesLabel;
    // End of variables declaration//GEN-END:variables

    
    
    public void modifyParameters(org.exmaralda.partitureditor.interlinearText.BreakParameters param){
        boolean bv = respectWordBoundariesCheckBox.isSelected();
        boolean[] rwb = {bv,bv,bv,bv,bv,bv};
        param.respectWordBoundaries =  rwb;
        //char[] wec = {' ','\'','-'};
        param.wordEndChars=wordEndChars;
        param.tolerance = toleranceSlider.getValue();
        param.pageBreakTolerance = vertToleranceSlider.getValue();
        param.additionalLabelSpace = labelSpaceSlider.getValue();
        param.removeEmptyLines = removeEmptyLinesCheckBox.isSelected();
        param.numberItBundles = numberItBundlesCheckBox.isSelected();
        param.smoothRightBoundary = smoothRightBoundariesCheckBox.isSelected();
        param.saveSpace = saveSpaceCheckBox.isSelected();
    }

    private void updateWordBoundarieLabel() {
        String wec = new String();
        for (int pos=0; pos<wordEndChars.length; pos++){
            wec+="[" + wordEndChars[pos] + "] ";
        }
        wordBoundariesLabel.setText(wec);
    }
}

